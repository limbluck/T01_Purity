<header class="header">

    <button class="sidebar-button"
        (click)="toggleSidebar.emit()"
    >
        <svg class="sidebar-button__icon"
            xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 52 52" enable-background="new 0 0 52 52" xml:space="preserve"
        >
            <path d="M46.5,14h-41C4.7,14,4,13.3,4,12.5v-3C4,8.7,4.7,8,5.5,8h41C47.3,8,48,8.7,48,9.5v3C48,13.3,47.3,14,46.5,14z"/>
            <path d="M46.5,28.9h-41c-0.8,0-1.5-0.7-1.5-1.5v-3C4,23.7,4.7,23,5.5,23h41c0.8,0,1.5,0.7,1.5,1.5v3C48,28.2,47.3,28.9,46.5,28.9z"/>
            <path d="M46.5,44h-41C4.7,44,4,43.3,4,42.5v-3C4,38.7,4.7,38,5.5,38h41c0.8,0,1.5,0.7,1.5,1.5v3C48,43.3,47.3,44,46.5,44z"/>
        </svg>
    </button>

    <nav class="navigation">
        <a class="navigation__link" tabindex="0" routerLink="/home">Home</a>
        <a class="navigation__link" tabindex="0">Courses</a>
        <a class="navigation__link" tabindex="0">Blogs</a>
        <a class="navigation__link" tabindex="0">About</a>
    </nav>
    
    <button class="language"
        #language
        (click)="toggleLanguageDropdown()"
    >
        <span class="language__full">English</span>
        <span class="language__short">En</span>
        @if (showLanguageDropdown) {
            <div class="language__dropdown"
                #language__dropdown
                (click)="$event.stopPropagation()"
            >
                <a class="language__option" tabindex="0">English</a>
                <a class="language__option" tabindex="0">Русский</a>
            </div>
        }
    </button>

    <div class="header__separator"
        [class.authorized]="AuthorizationService.authorized"
    ></div>

    <button class="search"
        #search
        (click)="toggleSearchDropdown()"
    >
        <svg class="search__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"
            [class.active]="showSearchDropdown"
        >
            <path d="M49.62,45.27,36.22,32a18.9,18.9,0,1,0-34.1-9.2A18.91,18.91,0,0,0,32,36.27l13.3,13.3a1.45,1.45,0,0,0,2.1,0l2.1-2.1A1.68,1.68,0,0,0,49.62,45.27Zm-28.7-11.5a12.9,12.9,0,1,1,12.9-12.9A12.87,12.87,0,0,1,20.92,33.77Z" fill-rule="evenodd"/>
        </svg>
        @if (showSearchDropdown) {
            <div class="search__dropdown"
                #search_dropdown
                [class.authorized]="AuthorizationService.authorized"
                (click)="$event.stopPropagation()"
            >
                <input class="search__searchbar" type="text" placeholder="Search">
            </div>
        }
    </button>

    @if(AuthorizationService.authorized) {
        <button class="notifications"
            #notifications
            (click)="toggleNotificationsDropdown()"
        >
            <svg class="notifications__icon"
                xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 52 52" enable-background="new 0 0 52 52" xml:space="preserve"
                [class.active]="showNotificationsDropdown"
            >
                <g>
                    <path d="M46,33h-0.5c-1.9,0-3.5-1.6-3.5-3.5V18c0-9.1-7.6-16.4-16.8-16C16.6,2.4,10,9.8,10,18.5v11.1c0,1.9-1.6,3.4-3.5,3.4H6c-2.2,0-4,1.9-4,4.1v1.5C2,39.3,2.7,40,3.5,40h45c0.8,0,1.5-0.7,1.5-1.5V37C50,34.8,48.2,33,46,33z"/>
                    <path d="M30.9,44h-9.8c-0.6,0-1.1,0.6-1,1.2c0.5,2.8,3,4.8,5.9,4.8s5.4-2.1,5.9-4.8C32,44.6,31.5,44,30.9,44z"/>
                </g>
            </svg>
            @if (showNotificationsDropdown) {
                <div class="notifications__dropdown"
                    #notifications__dropdown
                    (click)="$event.stopPropagation()"
                >
                    <div class="notifications__header-container">
                        <span class="notifications__header-text">Notifications</span>
                        <button class="notifications__header-button">
                            <svg class="notifications__header-button-icon"
                                xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 52 52" enable-background="new 0 0 52 52" xml:space="preserve"
                            >
                                <g>
                                    <path d="M19.1,42.5L2.6,25.9c-0.6-0.6-0.6-1.6,0-2.2l2.2-2.2c0.6-0.6,1.6-0.6,2.2,0L19.4,34c0.4,0.4,1.1,0.4,1.5,0L45.2,9.5c0.6-0.6,1.6-0.6,2.2,0l2.2,2.2c0.6,0.6,0.6,1.6,0,2.2L21.3,42.5C20.7,43.2,19.7,43.2,19.1,42.5z"/>
                                </g>
                            </svg>
                        </button>
                        <button class="notifications__header-button">
                            <svg class="notifications__header-button-icon"
                                xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 52 52" enable-background="new 0 0 52 52" xml:space="preserve"
                            >
                                <g>
                                    <path d="M26.1,19.1c-3.9,0-7,3.1-7,7s3.1,7,7,7s7-3.1,7-7S30,19.1,26.1,19.1z"/>
                                    <path d="M47.1,32.4l-3.7-3.1c0.2-1.1,0.3-2.3,0.3-3.4c0-1.1-0.1-2.3-0.3-3.4l3.7-3.1c1.2-1,1.6-2.8,0.8-4.2l-1.6-2.8c-0.6-1-1.7-1.6-2.9-1.6c-0.4,0-0.8,0.1-1.1,0.2l-4.6,1.7c-1.8-1.6-3.8-2.7-5.9-3.4L31,4.6c-0.3-1.6-1.7-2.5-3.3-2.5h-3.2c-1.6,0-3,0.9-3.3,2.5l-0.8,4.6c-2.2,0.7-4.2,1.9-6,3.4l-4.6-1.7c-0.4-0.1-0.7-0.2-1.1-0.2c-1.2,0-2.3,0.6-2.9,1.6l-1.6,2.8c-0.8,1.4-0.5,3.2,0.8,4.2l3.7,3.1c-0.2,1.1-0.3,2.3-0.3,3.4c0,1.2,0.1,2.3,0.3,3.4L5,32.3c-1.2,1-1.6,2.8-0.8,4.2l1.6,2.8c0.6,1,1.7,1.6,2.9,1.6c0.4,0,0.8-0.1,1.1-0.2l4.6-1.7c1.8,1.6,3.8,2.7,5.9,3.4l0.8,4.8c0.3,1.6,1.6,2.7,3.3,2.7h3.2c1.6,0,3-1.2,3.3-2.8l0.8-4.8c2.3-0.8,4.4-2,6.2-3.7l4.3,1.7c0.4,0.1,0.8,0.2,1.2,0.2c1.2,0,2.3-0.6,2.9-1.6l1.5-2.6C48.7,35.2,48.3,33.4,47.1,32.4z M26.1,37.1c-6.1,0-11-4.9-11-11s4.9-11,11-11s11,4.9,11,11S32.2,37.1,26.1,37.1z"/>
                                </g>
                            </svg>
                        </button>
                    </div>
                    <div class="notifications__container">
                        <div class="notification">
                            <svg class="notification__icon"
                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"
                            >
                                <path d="M24.12,2.69A16.11,16.11,0,0,0,9.69,17a15.9,15.9,0,0,0,5.85,13.65,4.92,4.92,0,0,1,1.87,3.82v.08a4,4,0,0,0,4.05,4h9a4,4,0,0,0,4.05-4v-.08a4.92,4.92,0,0,1,1.87-3.82,15.88,15.88,0,0,0,5.93-12.24C42.36,9.09,34,1.68,24.12,2.69ZM33,43.16H19a1.56,1.56,0,0,0-1.56,1.56,4.69,4.69,0,0,0,4.68,4.68h7.8a4.69,4.69,0,0,0,4.68-4.68A1.56,1.56,0,0,0,33,43.16Z"/>
                            </svg>
                            <div class="notification__container">
                                <span class="notification__header">You just earned a badge!</span>
                                <span class="notification__timestamp">2 years 320 days ago</span>
                            </div>
                        </div>
                    </div>
                    <div class="notifications__see-all-button">See all</div>
                </div>
            }
        </button>
        
        <button class="chat">
            <svg class="chat__icon"
                xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 52 52" enable-background="new 0 0 52 52" xml:space="preserve"
            >
                <path d="M26,4C12.7,4,2.1,13.8,2.1,25.9c0,3.8,1.1,7.4,2.9,10.6c0.3,0.5,0.4,1.1,0.2,1.7l-3.1,8.5c-0.3,0.8,0.5,1.5,1.3,1.3l8.6-3.3c0.5-0.2,1.1-0.1,1.7,0.2c3.6,2,7.9,3.2,12.5,3.2C39.3,48,50,38.3,50,26.1C49.9,13.8,39.2,4,26,4zM14,30c-2.2,0-4-1.8-4-4s1.8-4,4-4s4,1.8,4,4S16.2,30,14,30z M26,30c-2.2,0-4-1.8-4-4s1.8-4,4-4s4,1.8,4,4S28.2,30,26,30z M38,30c-2.2,0-4-1.8-4-4s1.8-4,4-4s4,1.8,4,4S40.2,30,38,30z"/>
            </svg>
        </button>
    }

    <div class="header__separator"
        [class.authorized]="AuthorizationService.authorized"
    ></div>

    @if(!AuthorizationService.authorized) {
        <button class="log-in"
        (click)="logIn()"
        >
            Log in
        </button>
    }

    @if (AuthorizationService.authorized) {
        <button class="profile"
            ngModel
            #profile
            (click)="toggleProfileDropdown()"
        >
            <img class="profile__image" src="../../../assets/profile-pic.jpg" alt="">
            <span class="profile__name"
                [class.active]="showProfileDropdown"
            >Peter Evans</span>
            @if (showProfileDropdown) {
                <div class="profile__dropdown"
                    #profile__dropdown
                    (click)="$event.stopPropagation()"
                >
                    <a class="profile__option" tabindex="0">Profile</a>
                    <div class="profile__separator"></div>
                    <a class="profile__option" tabindex="0">Grades</a>
                    <a class="profile__option" tabindex="0">Calendar</a>
                    <a class="profile__option" tabindex="0">Files</a>
                    <div class="profile__separator"></div>
                    <a class="profile__option" tabindex="0"
                        (click)="logOut()"
                    >Log out</a>
                </div>
            }
        </button>
    }

</header>